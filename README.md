---

# MeLA-Service: Enterprise AI Agent for Fintech Optimization

> **"Code-as-Policy" æ¶æ„çš„é‡‘èé£æ§ä¸ç­–ç•¥ä¼˜åŒ–æ™ºèƒ½ä½“**

## ğŸ“– é¡¹ç›®ç®€ä»‹ (Introduction)

**MeLA-Service** æ˜¯ä¸€ä¸ªåŸºäº **FastAPI** æ„å»ºçš„ä¼ä¸šçº§ AI Agent å¾®æœåŠ¡ï¼ŒåŸºäºå‰æ²¿è®ºæ–‡ *Multi-role Evolving Learning Agent (MeLA)* æ¶æ„è¿›è¡Œå·¥ç¨‹åŒ–é‡æ„ã€‚

è¯¥é¡¹ç›®æœåŠ¡äº Fintech å¹³å° **Lumos Flow**ï¼Œæ—¨åœ¨é€šè¿‡å¤§æ¨¡å‹ï¼ˆDeepSeekï¼‰ä¸ RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰æŠ€æœ¯ï¼Œè§£å†³è·¨å¢ƒèµ„é‡‘æµé¢„æµ‹ä¸æ±‡ç‡å¯¹å†²ç­–ç•¥ä¼˜åŒ–é—®é¢˜ã€‚ä¸ä¼ ç»Ÿ Chatbot ä¸åŒï¼ŒMeLA å…·å¤‡**è‡ªä¸»ç¼–ç¨‹ (Self-coding)** èƒ½åŠ›ï¼Œé€šè¿‡è¿›åŒ–ç­–ç•¥åŠ¨æ€ç”Ÿæˆä¼˜åŒ–ç®—æ³•ï¼Œå¹¶åœ¨æ²™ç®±ä¸­å®‰å…¨æ‰§è¡Œã€‚

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„ (System Architecture)

ç³»ç»Ÿé‡‡ç”¨ **ReAct (Reason + Act)** èŒƒå¼ï¼ŒåŒ…å«å››å¤§æ ¸å¿ƒæ¨¡ç»„ï¼š

1. **ğŸ§  æ„ŸçŸ¥ä¸å†³ç­–å±‚ (Router)**ï¼šåŸºäº LLM çš„æ„å›¾è¯†åˆ«ï¼Œè‡ªåŠ¨åˆ†æµå’¨è¯¢ç±»ï¼ˆRAGï¼‰ä¸ä»»åŠ¡ç±»ï¼ˆOptimizationï¼‰è¯·æ±‚ã€‚
2. **ğŸ“š åŠ¨æ€è®°å¿†å±‚ (RAG Memory)**ï¼šé›†æˆ **ChromaDB** å‘é‡æ•°æ®åº“ï¼Œæ”¯æŒ PDF/Markdown éç»“æ„åŒ–æ–‡æ¡£çš„ ETL è§£æä¸æ··åˆæ£€ç´¢ã€‚
3. **ğŸ›¡ï¸ å®‰å…¨æ‰§è¡Œå±‚ (Execution Sandbox)**ï¼šå®ç° **Docker + Mock åŒæ¨¡å¼å¼•æ“**ã€‚ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ Docker å®¹å™¨éš”ç¦»è¿è¡Œ LLM ç”Ÿæˆçš„ä»£ç ï¼Œå¼€å‘ç¯å¢ƒè‡ªåŠ¨é™çº§ä¸º Mock æ¨¡å¼ã€‚
4. **âš–ï¸ è‡ªåŠ¨åŒ–è¯„æµ‹å±‚ (AI-QA Pipeline)**ï¼šåŸºäº **LLM-as-a-Judge** èŒƒå¼çš„è‡ªåŠ¨åŒ–æµ‹è¯•æµæ°´çº¿ï¼Œå®ç°å¹»è§‰æ£€æµ‹ä¸å›å½’æµ‹è¯•ã€‚

---

## ğŸš€ æ ¸å¿ƒç‰¹æ€§ (Key Features)

### 1. ç”Ÿäº§çº§åç«¯æ¶æ„

* **å¼‚æ­¥å¹¶å‘ (Async/Await)**ï¼šåŸºäº FastAPI `BackgroundTasks` å®ç°è€—æ—¶ä»»åŠ¡çš„éé˜»å¡å¤„ç†ï¼Œååé‡æå‡ 5xã€‚
* **æ ‡å‡†åŒ–äº¤ä»˜**ï¼šæä¾› `Dockerfile` ä¸ `docker-compose.yml`ï¼Œå®ç°ä¸€é”®å®¹å™¨åŒ–éƒ¨ç½²ã€‚

### 2. é«˜çº§ RAG æ•°æ®å·¥ç¨‹ (Data Engineering)

* **ETL æµæ°´çº¿**ï¼šå†…ç½® `ingestion.py` å¼•æ“ï¼Œæ”¯æŒ PDF æ–‡æ¡£çš„è‡ªåŠ¨åŒ–åŠ è½½ä¸æ¸…æ´—ã€‚
* **è¯­ä¹‰åˆ‡åˆ†**ï¼šé‡‡ç”¨ `RecursiveCharacterTextSplitter` (Chunk=500, Overlap=50)ï¼Œè§£å†³ä¸Šä¸‹æ–‡æˆªæ–­å¯¼è‡´çš„è¯­ä¹‰ä¸¢å¤±é—®é¢˜ã€‚
* **è·¨è¯­è¨€å¯¹é½**ï¼šé€šè¿‡ Prompt ä¼˜åŒ–è§£å†³äº†ä¸­è‹±æ–‡è·¨è¯­è¨€æ£€ç´¢çš„ Embedding åå·®ã€‚

### 3. è‡ªåŠ¨åŒ–è¯„æµ‹ä½“ç³» (Automated Evaluation) ğŸ”¥ *[Highlight]*

é’ˆå¯¹ AI åº”ç”¨â€œéš¾ä»¥é‡åŒ–â€çš„ç—›ç‚¹ï¼Œæ„å»ºäº†å®Œæ•´çš„ **Quality Assurance (QA)** ä½“ç³»ï¼š

* **LLM-as-a-Judge**ï¼šå¼•å…¥ DeepSeek ä½œä¸ºâ€œè£åˆ¤æ¨¡å‹â€ï¼Œå¯¹ Agent å›ç­”è¿›è¡Œæ‰“åˆ† (0-10)ã€‚
* **Golden Dataset**ï¼šæ„å»ºåŒ…å« Ground Truth çš„é‡‘æ ‡æ•°æ®é›†ï¼Œè¦†ç›–å®šä¹‰ã€æ¨ç†ã€è®¡ç®—ä¸‰å¤§ç»´åº¦ã€‚
* **æŒ‡æ ‡é‡åŒ–**ï¼šè‡ªåŠ¨è®¡ç®— **Hallucination Rate (å¹»è§‰ç‡)** ä¸ **Answer Relevance (ç›¸å…³æ€§)**ã€‚
* **å®æˆ˜æˆæœ**ï¼šé€šè¿‡ Bad Case åˆ†æä¸æµ‹è¯•é›†è¿­ä»£ï¼Œå°† RAG æ£€ç´¢å‡†ç¡®ç‡ä» **0% æå‡è‡³ 100%**ã€‚

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ (Tech Stack)

* **Language**: Python 3.9
* **Framework**: FastAPI, Uvicorn
* **LLM Integration**: DeepSeek API (OpenAI Compatible SDK)
* **Vector DB**: ChromaDB
* **Data Processing**: LangChain Community, PyPDF
* **DevOps**: Docker, Docker Compose
* **Testing**: Pytest, Custom Eval Pipeline

---

## âš¡ å¿«é€Ÿå¼€å§‹ (Quick Start)

### æ–¹å¼ä¸€ï¼šä½¿ç”¨ Docker (æ¨è - ç”Ÿäº§ç¯å¢ƒæ¨¡æ‹Ÿ)

æ— éœ€é…ç½® Python ç¯å¢ƒï¼Œä¸€è¡Œå‘½ä»¤å¯åŠ¨å…¨æ ˆæœåŠ¡ï¼š

```bash
# 1. æ„å»ºå¹¶å¯åŠ¨æœåŠ¡
docker-compose up --build

# æœåŠ¡å°†åœ¨ http://localhost:8000 å¯åŠ¨

```

### æ–¹å¼äºŒï¼šæœ¬åœ°å¼€å‘ (Local Development)

```bash
# 1. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 2. å¯åŠ¨æœåŠ¡ (å¼€å‘æ¨¡å¼)
python -m uvicorn app.main:app --reload

```

---

## ğŸ“Š è¯„æµ‹æŠ¥å‘Šæ¼”ç¤º (Evaluation Demo)

> ä¸‹å›¾å±•ç¤ºäº† `eval_pipeline.py` çš„è¿è¡Œç»“æœã€‚é€šè¿‡ä¿®å¤ RAG æ£€ç´¢é€»è¾‘ï¼Œç³»ç»Ÿåœ¨é‡‘æ ‡æµ‹è¯•é›†ä¸Šå–å¾—äº† **10/10** çš„æ»¡åˆ†é€šè¿‡ç‡ã€‚

*(è¿™é‡Œå»ºè®®æ”¾ä½ é‚£å¼  "10.0 / 10.0 Pass" çš„ç»¿è‰²æˆªå›¾)*

```text
ğŸš€ å¼€å§‹æ‰§è¡Œè‡ªåŠ¨åŒ–è¯„æµ‹...
--------------------------------------------------
æ­£åœ¨æµ‹è¯• Case 1: What is MeLA? ...
âœ… è£åˆ¤è¯„åˆ†: 10/10 | ç†ç”±: å›ç­”å‡†ç¡®è¦†ç›–äº†æ ¸å¿ƒå®šä¹‰ä¸æ¶æ„ç»†èŠ‚ã€‚
--------------------------------------------------
æ­£åœ¨æµ‹è¯• Case 2: Optimization Logic ...
âœ… è£åˆ¤è¯„åˆ†: 10/10 | ç†ç”±: å‡†ç¡®æè¿°äº†è¿›åŒ–ç­–ç•¥è¿­ä»£è¿‡ç¨‹ã€‚
--------------------------------------------------
ğŸ“Š è¯„æµ‹å®Œæˆï¼å¹³å‡åˆ†: 10.0 / 10.0 -> ğŸ‰ Result: PASS

```

---

## ğŸ“‚ é¡¹ç›®ç»“æ„ (Project Structure)

```text
MeLA-Service/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/            # è·¯ç”±ä¸æ¥å£å®šä¹‰
â”‚   â”œâ”€â”€ core/           # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ engine.py   # æ‰§è¡Œå¼•æ“ (Docker/Mock)
â”‚   â”‚   â”œâ”€â”€ rag.py      # RAG æ£€ç´¢æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ llm.py      # LLM è°ƒç”¨å°è£…
â”‚   â”‚   â”œâ”€â”€ ingestion.py# æ•°æ®æ¸…æ´— ETL
â”‚   â”‚   â””â”€â”€ workflow.py # Agent çŠ¶æ€æœº
â”‚   â””â”€â”€ main.py         # ç¨‹åºå…¥å£
â”œâ”€â”€ tests/              # å•å…ƒæµ‹è¯•
â”œâ”€â”€ eval_pipeline.py    # âœ¨ è‡ªåŠ¨åŒ–è¯„æµ‹è„šæœ¬ (LLM-as-a-Judge)
â”œâ”€â”€ requirements.txt    # ä¾èµ–æ¸…å•
â”œâ”€â”€ Dockerfile          # é•œåƒæ„å»ºæ–‡ä»¶
â”œâ”€â”€ docker-compose.yml  # å®¹å™¨ç¼–æ’æ–‡ä»¶
â””â”€â”€ README.md           # é¡¹ç›®è¯´æ˜

```

---

### ğŸ‘¨â€ğŸ’» Author

**[Yiming Liu]**
*AI Engineering / QA Specialist*

---
